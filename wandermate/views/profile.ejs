<!DOCTYPE html>
<html>
<head>

  <link rel="stylesheet"  href="https://demos.creative-tim.com/argon-design-system-pro/assets/css/argon-design-system.min.css?v=1.0.0">
  <link rel="stylesheet" href="https://demos.creative-tim.com/argon-design-system-pro/assets/css/font-awesome.css">
  <link rel="stylesheet" href="https://demos.creative-tim.com/argon-design-system-pro/assets/css/nucleo-icons.css">
  <link rel="stylesheet" href="https://demos.creative-tim.com/argon-design-system-pro/assets/css/nucleo-svg.css">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
  <script src="https://kit.fontawesome.com/ea0619ce99.js" crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js" ></script>
  <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>


<style>


  #wander {
    line-height: 50px;
    position: fixed;
    float: left;
    margin: 17px 220px;
    color: grey;
    font-weight: 600 !important ;
    font-size: 14px;
    letter-spacing: 2px;
    transition: 1s
  }

  nav {
    position: fixed;
    width: 102%;
    line-height: 60px;
    z-index: 1000;
    overflow-y: visible;
    border-width: thin;
    padding: 10px;
    background: #fafbfc;
    box-shadow:0 4px 4px -2px #495057;
  }

  nav ul {
    line-height: 50px;
    list-style: none;
    background: rgba(0, 0, 0, 0);
    color: grey;
    padding: 0;
    text-align: right;
    margin: 0;
    padding-right: 40px;
    transition: 1s;
  }

  nav ul li {
    display: inline-block;
    padding: 10px 20px;
  }

  nav ul li a {
    text-decoration: none;
    color: grey;
    font-size: 16px;
  }


  .myedit{
          padding-left : 20px;
          padding-top : 10px;
          width: 22%;
        }
  #form{
    padding-top : 1px;
    background-color:white;
    width: 100%;
    padding-bottom:0px;
  }

  #first{


  }
  #second{
          padding-left:30px;
  }
  #third{

  }

  h2{
      font-family: verdana;
      padding:0px;;
  }
  .jumbotron{

  }
  #line1{
    width : 400px;
    padding-left: 30px;
    padding-top: 0px;
    padding-bottom: 0px;
    margin : 0px;
  }
  .list{
    overflow : auto;
    height : 400px;
  }
  .list::-webkit-scrollbar{
    display : none;
  }
  #line2{
    padding-left :;
    width : 300px;
    padding-top: 0px;
    padding-bottom: 0px;
    margin : 0px;
  }
  #line3{
    width : 300px;
    padding-top: 0px;
    padding-bottom: 0px;
    margin : 0px;
  }
  #heading2{
    padding-left : 40px;
  }
  .bookings {
    display : flex;
    overflow-x: auto;
  }
  .bookings::-webkit-scrollbar{
    display : none;
  }
  .new{
    min-width : 22%;
    margin : 10px;

  }



</style>

</head>
<body style="overflow-x:hidden;">
  <div class="row" style="top:0px;position:fixed;z-index:100">
    <nav id="nav" style="z-index:5;padding-top:0.2%;padding-bottom:0.05%;border:none;" class="navpic">
      <div class="logo">
        <span id="wander">WANDERMATE</span>
      </div>
      <div class="menu"  style="overflow:visible!important;">
        <ul id="ul" style="margin-left:60%;margin-top:0.4%;">
          <center>
           <li><a class="items" href="/users/dashboard"><i class="fas fa-home"></i></a></li>
           <li><a class="items" href="/blog"><i class="fas fa-blog"></i></a></li>
           <li><a class="items" href="#"><i class="fas fa-bell"></i></a></li>
           <li class="dropdown" style="margin-left:-4%;">
               <button style="color:grey;font-size:16px;margin-top:-2%;" class="btn btn-outline-link dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                 <i class="far fa-user-circle"><small><b><%= user.username %></b></small></i>
               </button>
               <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                 <a style="padding-top:2px;" class="dropdown-item" href="/users">Profile</a>
                 <a style="padding-top:2px;" class="dropdown-item" href="#">WanderList</a>
                 <a style="padding-top:2px;" class="dropdown-item" href="/users/logout">Logout</a>
               </div>
           </li>
         </center>
        </ul>
      </div>
    </nav>
  </div>

  <% var past = 0 %>
  <% var boo = 0 %>
  <% for ( var i = 0; i < user.booking.length; i++ ) { %>
  <% if ( user.booking[i].date_n_time.date < date ) { %>
    <% past++;
   } %>
  <% if ( user.booking[i].date_n_time.date > date ) { %>
    <% boo++;
   } %>
  <% } %>
      <div class="row" style="margin-top:7%;margin-left:7%;">
      <div class="myedit" id = "first" style="width:23%;">
            <div class="card card-profile" data-image="profile-image">
              <div class="card-header">
                <div class="card-image">
                  <a href="javascript:;">
                    <input type="image" id="image" src="<%=user.img.path%>" width="322px"/>
                    <input type="file" id="my_file" style="display: none;" />
                  </a>
                </div>
              </div>
              <div class="card-body pt-0">
                <h4 class="display-4 mb-0"><%=user.name%></h4>
                <p class="lead"><%=user.city%></p>
                <div class="table-responsive">
                  <ul class="list-unstyled ">
                    <li class="py-1">
                      <div class="d-flex align-items-center">
                        <div>
                          <div class="badge badge-circle badge-info mr-3">
                            <i class="fa fa-phone"></i>
                          </div>
                        </div>
                        <div>
                          <h6 class="mb-1"><%= user.phone_number %></h6>
                        </div>
                      </div>
                    </li>
                    <li class="py-1">
                      <div class="d-flex align-items-center">
                        <div>
                          <div class="badge badge-circle badge-success mr-3">
                            <i class="ni ni-user-run"></i>
                          </div>
                        </div>
                        <div>
                          <h6 class="mb-1">places visited  <%= past %></h6>
                        </div>
                      </div>
                    </li>
                    <li class="py-1">
                      <div class="d-flex align-items-center">
                        <div>
                          <div class="badge badge-circle badge-danger mr-3">
                            <i class="ni ni-chart-bar-32"></i>
                          </div>
                        </div>
                        <div>
                          <h6 class="mb-1">bookings    <%= boo %></h6>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div style="padding-left:5%;">
            <h2>Edit Profile</h2>
            <hr id="line1" noshade>
          <div id="form" class="jumbotron shadow-sm p-3 mb-5 bg-white rounded">
            <form action='/users/' method='POST' autocomplte='off'>
              <div class="form" style="padding-top  :10px;">
                <div class="form-group">
                  <label for="name">Name</label>
                  <input style="width:99%" type="text" class="form-control" id="name"  placeholder="Enter name" name = 'name' value=<%= user.name %>>
                </div>
                <div class="form-group">
                  <label for="email">Email</label>
                  <input style="width:99%" type="email" class="form-control" id="email"  placeholder="Enter Email" name = 'email' value=<%= user.email %> readonly>
                </div>
                <div class="form-row">
                  <div class="form-group md-col-6">
                    <label for="username">Username</label>
                    <input type="text" class="form-control" id="username"  placeholder="Enter Username" name = 'username' value=<%= user.username %>>
                  </div>
                  <div style="padding-left:121px" class="form-group md-col-6">
                    <label for="phone">Phone</label>
                    <input type="text" class="form-control" id="phone"  placeholder="Enter number" name = 'phone' value=<%= user.phone_number %>>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group md-col-6">
                    <label for="city">City</label>
                    <input type="text" class="form-control" id="city"  placeholder="Enter city" name = 'city' value=<%= user.city %>>
                  </div>
                  <div style="padding-left:121px" class="form-group md-col-6">
                    <label for="state">State</label>
                    <input type="text" class="form-control" id="state"  placeholder="Enter state" name = 'state' value=<%= user.state %>>
                  </div>
                </div>

                <input class="btn btn-icon btn-primary mt-0" type="submit">
              </div>
            </form></div></div>
          </div>
          <h2>Current Bookings</h2>
          <!-- <hr id="line3" noshade> -->
          <div class="section features-7 bg-secondary">
          <div class="bookings">
            <% for ( var i = 0; i < user.booking.length; i++ ) { %>
                <% if ( user.booking[i].date_n_time.date > date ) { %>
                        <div class="new">
                          <div class="col">
                            <div class="card card-lift--hover shadow border-0">
                              <div class="card-body py-5">
                                <div class="icon icon-shape icon-shape-primary rounded-circle mb-4">
                                  <i class="ni ni-istanbul"></i>
                                </div>
                                <h6 class="text-primary text-uppercase"><%= user.booking[i].guide %></h6>
                                <p class="description mt-3"><%= user.booking[i].date_n_time.date %></p>
                                <p class="description mt-3"><%= user.booking[i].place %></p>
                                <p class="description mt-3">The Taj Mahal was designated as a UNESCO World Heritage Site in 1983 for being "the jewel of Muslim art in India and one of the universally admired masterpieces of the world's heritage"</p>

                                <a href="/chat/<%= user.name %>/<%= user.booking[i].guide %>" class="btn btn-primary mt-4">Chat</a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <% } %>
                    <% } %>

          </div></div>





            <script>
              $("input[type='image']").click(function() {
                $("input[id='my_file']").click();
              });
            </script>
            <!-- <script type="text/javascript">
            window.onscroll = function(){
              var navbar = document.getElementById('nav')
            //   var wander = document.getElementById('wander')
            //   var items = document.getElementsByClassName('items')
            //   var count = document.getElementById('count')
            //   var btn = document.getElementById('dropdownMenuButton')
            //   var ul = document.getElementById('ul')

              if (window.pageYOffset < 250){
                navbar.style.background = "rgba(0, 0, 0, 0)";
            //     navbar.style.boxShadow = 'none';
            //     wander.style.color = "#ffffff";
            //     wander.style.marginTop = "35px"
            //     ul.style.marginTop = "1.7%";
            //     btn.style.color = '#ffffff';
            //     for(var i=0; i<items.length; i++){
            //       items[i].style.color = "#ffffff";
            //       items[i].onmouseover = function(){
            //         items[i].style.color = "#06b995";
            //       }
            //     }
              } else {
                navbar.style.background = '#fff';
            //     navbar.style.boxShadow = "0 4px 4px -2px #495057";
            //     wander.style.color = "grey";
            //     btn.style.color = 'grey';
            //     wander.style.marginTop = "17px"
            //     ul.style.marginTop = "0.4%";
            //     for(var i=0; i<items.length; i++){
            //       items[i].style.color = "grey";
            //       items[i].onmouseover = function(){
            //         items[i].style.color = "black";
            //       }
            //     }
            //   }
            }
            </script> -->

    </body>
</html>
